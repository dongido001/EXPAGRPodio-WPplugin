<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <script src='https://www.google.com/recaptcha/api.js'></script>

</head>
<body>
  <div style="width: 80%; margin-left: 10%;background: transaparent; padding-bottom:25px; padding-top:35px;"> 
    <form action="{path-gis_reg_process}" method="POST" class="regform" id="expa_reg_form" accept-charset="UTF-8" style="background-color: transparent; width:80%; margin-left:10%;">
      <table class="sighnup-form-table" style="background-color: transparent;">
        <tr>
          <td style="vertical-align: top;padding-top: 15px; padding-left: 5%; width:30%;text-align: right;"  class="input-name"><h6 style="font-weight:normal; display:inline;font-style:inherit;">{name}</h6> <span class="required">*</span></td>
          <td style="width:66%;"><input style="border:1px solid #037Ef3; height: 30px; width: 95%;"  id="first_name" class="input" type="text" maxlength="50" name="first_name"
            required
            oninvalid="this.setCustomValidity('Ingresa tu nombre')"
            oninput="setCustomValidity('')">
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;padding-top: 15px; padding-left: 5%; width:30%;text-align: right;"  class="input-name"><h6 style="font-weight:normal; display:inline;font-style:inherit;">{surname}</h6>  <span class="required">*</span></td>
          <td style="width:66%;"><input  style="border:1px solid #037Ef3; height: 30px; width: 95%;"  id="last_name" class="input" type="text" name="last_name" maxlength="50"
            required
            oninvalid="this.setCustomValidity('Ingresa tu apellido')"
            oninput="setCustomValidity('')">
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;padding-top: 15px; width:30%;padding-left: 5%;text-align: right;"  class="input-name"><h6 style="font-weight:normal; display:inline;font-style:inherit;">{e-mail}</h6>  <span class="required">*</span></td>
          <td> <input  style="border:1px solid #037Ef3; height: 30px; width: 95%;"  id="email" class="input" type="text" name="email" maxlength="50"
            required
            oninvalid="this.setCustomValidity('Please input valid e-mail')"
            oninput="setCustomValidity('')"
            pattern="^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$">
          </td>
        </tr>
        <tr style="background-color: transparent;">
          <td style="vertical-align: top;padding-top: 15px; width:30%;padding-left: 5%;text-align: right;"  class="input-name"><h6 style="font-weight:normal; display:inline;font-style:inherit;">{password}</h6> <span class="required">*</span></td>
          <td style="width:66%;"><input  style="border:1px solid #037Ef3; height: 30px; width: 95%;"  id="password" class="input" type="password" name="password"
            required
            oninvalid="this.setCustomValidity('La contraseña debe tener al menos 8 caractéres')"
            oninput="setCustomValidity('')"
            pattern=".{8,}">
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;padding-top: 15px; width:30%; padding-left: 5%;text-align: right;"  class="input-name"><h6 style="font-weight:normal; display:inline;font-style:inherit;">{phone}</h6> <span class="required">*</span></td>
          <td> <input  style="border:1px solid #037Ef3; height: 30px; width: 95%;"  id="phone" class="input" type="text" name="phone" maxlength="50">
          </td>
        </tr>
        <!-- TODO: hacer que se mapeen las opciones como las de los comites en el plugin -->
        <tr>
          <td style="vertical-align: top;padding-top: 15px; width:30%;padding-left: 5%;text-align: right;"  class="input-name"><h6 style="font-weight:normal; display:inline;font-style:inherit;">{source}</h6> <span class="required">*</span></td>
          <td>
            <select id="source" name="source" title="{source}"  style="border:1px solid #037Ef3; width: 95%;"  >
                  <option value="" class="hidden">Where did you first hear about us?</option>
                  <option value="Friend">Friend</option>
                  <option value="Information booth on campus">Information booth on campus</option>
                  <option value="Classroom presentation">Classroom presentation</option>
                  <option value="Facebook">Facebook</option>
                  <option value="WeChat">WeChat</option>
                  <option value="Twitter">Twitter</option>
                  <option value="Instagram">Instagram</option>
                  <option value="LinkedIn">LinkedIn</option>
                  <option value="Other social media channel">Other social media channel</option>
                  <option value="Search engine">Search engine</option>
                  <option value="Event">Event</option>
                  <option value="Emails">Emails</option>
                  <option value="Media (magazine, TV, newspaper or radio)">Media (magazine, TV, newspaper or radio)</option>
                  <option value="Other">Other</option></select></div>
           </select>

         </td>
       </tr>
       <!-- TODO: hacer que se mapeen las opciones como las de los comites en el plugin -->
       <tr>
        <td style="vertical-align: top;padding-top: 15px; width:30%; padding-left: 5%;text-align: right;" 
        class="input-name">
        <h6 style="font-weight:normal; display:inline;font-style:inherit;">{interested_in} </h6> 
        <span class="required">*</span>
      </td>
      <td>
        <select id="interested_in" name="interested_in" title="{source}"  
        style="border:1px solid #037Ef3; width: 95%;">

          <option value="" disabled="" selected="" >- Please Select -</option>
          <option value="1" >Global Talent</option>
          <option value="2" >Collaboration</option>
          <option value="3" >Youth Insights</option>

      </select>

    </td>
  </tr>


  <tr>
    <td style="vertical-align: top;padding-top: 15px; width:30%; padding-left: 5%;text-align: right;"  class="input-name"><h6 style="font-weight:normal; display:inline;font-style:inherit;">Selecciona tu estado</h6>  <span class="required">*</span></td>
    <td>
      <select id="state" name="state" title="Selecciona tu estado"  style="border:1px solid #037Ef3; width: 95%;"  >


      </select>
    </td>
  </tr>

  <tr>
    <td style="vertical-align: top;padding-top: 15px; width:30%; padding-left: 5%;text-align: right;"  class="input-name"><h6 style="font-weight:normal; display:inline;font-style:inherit;">{lead-name}</h6>  <span class="required">*</span></td>
    <td>
      <select id="university" name="university" title="{lead-name}"  style="border:1px solid #037Ef3; width: 95%;"  >


      </select>
    </td>
  </tr>

  <tr hidden="true">
    <td style="vertical-align: top;padding-top: 15px; width:30%;padding-left: 5%;text-align: right;"  class="input-name"><h6 style="font-weight:normal; display:inline;font-style:inherit;">{lc}</h6>  </td>
    <td style="width:66%;"><input class="readonly"  style="border:1px solid #037Ef3; height: 30px; width: 95%;"   id="localcommittee" name="localcommittee" title="{lc}" type="text"  readonly />
    </td>
  </tr>
  <tr>
    <td></td>
    <td class="check-holder" colspan="1">

      <input checked="" id="terms" type="checkbox" style="display: inline;    "><label for="terms" style="display: inline;">
      <span class="required" style="display: inline;">
        I have read the
        <a href="https://opportunities.aiesec.org/assets/terms.pdf" target="_blank"> Terms and Condition.</a>
      </span>
    </label>
  </td>
</tr>

<tr>
  <input type="hidden" name="website_url" value="{website_url}">
</table>
<div class="g-recaptcha" data-sitekey="6Ld8uAkUAAAAAMqyl5rjRbaUSP6CQlGzSAAy1pqZ" align="center"></div>

<div id="submit" style="padding:0px">


  <input type="submit" id="submit_button" name="submit" clicked="false" class="send" value="Register" style="width: 100%; margin: 6px 0px; padding: 6px; background: #037ff3;">
</div>
</form>
</div>
<script type='text/javascript' src='{path-gis_lcMapper}'></script>
<script type='text/javascript'>
//var $j = jQuery.noConflict();
jQuery(document).ready(function($){
  console.log("antes");
  var data = {leads_state};
  for (var key in data) {
    console.log(key);
    jQuery('#state').append('<option value="' + key + '">' + key + '</option>')
  }

  console.log("despues");
  
  var myJsonString = getLeads('{path-leads-json}');

  //valores default
  jQuery('#localcommittee').val('Aguascalientes');
  for (var key in data['Aguascalientes']) {
    console.log(key);
    jQuery('#university').append('<option value="' + key + '">' + key + '</option>')
  }
  //valores default

  //event funciotns

  jQuery('#state').change(function($) {
    jQuery('#university').empty();
    for (var key in data[jQuery('#state').val()]) {
      console.log(key);

      jQuery('#university').append('<option value="' + key + '">' + key + '</option>')
          jQuery('#localcommittee').val(data[jQuery('#state').val()][jQuery('#university').val()]);

    }
  });

  jQuery('#university').change(function($) {

    jQuery('#localcommittee').val(data[jQuery('#state').val()][jQuery('#university').val()]);
  });

  jQuery('#submit_button').click(function($){
    jQuery('#submit_button').attr('clicked', 'true');

  });
});
</script>
</body>
